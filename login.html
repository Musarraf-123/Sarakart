<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login | SaraKart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />

  <style>
    .login-wrapper {
      min-height: calc(100vh - 60px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 12px;
      background: radial-gradient(circle at top, #1d4ed8 0, #020617 55%);
    }

    .login-card {
      width: 100%;
      max-width: 820px;
      border-radius: 26px;
      overflow: hidden;
      display: grid;
      grid-template-columns: 1.2fr 1.8fr;
      box-shadow:
        0 22px 45px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(148, 163, 184, 0.4);
      border: 1px solid rgba(30, 64, 175, 0.7);
      background: rgba(15, 23, 42, 0.96);
    }

    @media (max-width: 800px) {
      .login-card {
        grid-template-columns: 1fr;
      }
    }

    .login-left {
      background: #2874f0;
      color: #f9fafb;
      padding: 28px 22px;
    }

    .login-left h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .login-left p {
      font-size: 13px;
      line-height: 1.5;
      max-width: 260px;
    }

    .login-right {
      padding: 22px 22px 18px;
      color: #e5e7eb;
      font-size: 13px;
    }

    .login-right label {
      display: block;
      margin-bottom: 4px;
      color: #9ca3af;
      font-size: 12px;
    }

    .login-right input {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
    }

    .form-group {
      margin-bottom: 12px;
    }

    .error-text {
      font-size: 11px;
      color: #fca5a5;
      margin-top: 3px;
      display: none;
    }

    .terms {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 10px;
    }

    .terms a {
      color: #60a5fa;
      text-decoration: none;
    }

    .login-btn {
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      background: #ff6200;
      color: #f9fafb;
      margin-right: 8px;
    }

    .new-user,
    .back-home {
      font-size: 12px;
      margin-top: 14px;
    }

    .new-user a,
    .back-home a {
      color: #60a5fa;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <!-- SIMPLE NAVBAR -->
  <header class="navbar">
    <div class="nav-left">
      <a href="index.html" class="sarakart-logo">SaraKart</a>
    </div>
    <div class="nav-right">
      <a href="index.html" class="nav-link" style="color:white;">Home</a>
      <span class="nav-link">Login</span>
    </div>
  </header>

  <!-- LOGIN CARD -->
  <main class="login-wrapper">
    <section class="login-card">
      <div class="login-left">
        <h1>Login</h1>
        <p>Get access to your Orders, Wishlist and Recommendations.</p>
      </div>

      <div class="login-right">
        <form id="loginForm" novalidate>
          <div class="form-group">
            <label for="emailOrMobile">Email</label>
            <input type="email" id="emailOrMobile" />
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" />
          </div>

          <span id="loginError" class="error-text"></span>

          <p class="terms">
            By continuing, you agree to SaraKart's
            <a href="#">Terms of Use</a> and <a href="#">Privacy Policy</a>.
          </p>

          <button type="submit" class="login-btn">Login</button>

          <p class="new-user">
            New to our site?
            <a href="signup.html">Create an account</a>
          </p>

          <p class="back-home">
            ‚Üê <a href="index.html">Back to Home</a>
          </p>
        </form>
      </div>
    </section>
  </main>

  <script>
    const loginForm = document.getElementById("loginForm");
    const loginError = document.getElementById("loginError");

    loginForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const email = document.getElementById("emailOrMobile").value.trim();
      const password = document.getElementById("password").value.trim();

      loginError.style.display = "none";
      loginError.textContent = "";

      if (!email || !password) {
        loginError.textContent = "Please enter email and password.";
        loginError.style.display = "block";
        return;
      }

      try {
        const res = await fetch("http://127.0.0.1:5001/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password }),
        });

        const data = await res.json();
        console.log("Login response:", data);

        if (!res.ok || !data.success) {
          loginError.textContent = data.message || "Invalid email or password.";
          loginError.style.display = "block";
          return;
        }

        // Navbar ke liye naam save
        localStorage.setItem("userName", data.name || email);

        alert("Login successful!");
        window.location.href = "index.html";
      } catch (err) {
        console.error("Login error:", err);
        loginError.textContent = "Server error. Backend not responding.";
        loginError.style.display = "block";
      }
    });
  </script>
</body>
</html>
